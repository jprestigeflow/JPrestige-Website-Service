const c=document.getElementById('bg-canvas'),ctx=c.getContext('2d');let W,H,pts;const rand=(a,b)=>a+Math.random()*(b-a);const resize=()=>{W=c.width=window.innerWidth*devicePixelRatio;H=c.height=window.innerHeight*devicePixelRatio;c.style.width=window.innerWidth+'px';c.style.height=window.innerHeight+'px';const n=Math.max(15,Math.min(35,Math.floor(window.innerWidth/45)));pts=Array.from({length:n},()=>({x:rand(0,W),y:rand(0,H),vx:rand(-0.12,0.12)*devicePixelRatio,vy:rand(-0.12,0.12)*devicePixelRatio,r:rand(1,2)*devicePixelRatio}))};const step=()=>{ctx.clearRect(0,0,W,H);for(const p of pts){p.x+=p.vx;p.y+=p.vy;if(p.x<0)p.x=W;if(p.x>W)p.x=0;if(p.y<0)p.y=H;if(p.y>H)p.y=0;ctx.beginPath();ctx.fillStyle='rgba(255,51,51,0.15)';ctx.arc(p.x,p.y,p.r,0,Math.PI*2);ctx.fill()}for(let i=0;i<pts.length;i++){for(let j=i+1;j<pts.length;j++){const a=pts[i],b=pts[j],dx=a.x-b.x,dy=a.y-b.y,d2=dx*dx+dy*dy,max=220*devicePixelRatio;if(d2<max*max){const t=1-Math.sqrt(d2)/max;ctx.strokeStyle=`rgba(255,51,51,${0.08*t})`;ctx.lineWidth=0.8*devicePixelRatio;ctx.beginPath();ctx.moveTo(a.x,a.y);ctx.lineTo(b.x,b.y);ctx.stroke()}}}requestAnimationFrame(step)};resize();step();window.addEventListener('resize',resize,{passive:!0});function playROI(){document.getElementById('vCover').style.display='none';const f=document.getElementById('roiFrame');f.style.display='block';f.src+='&autoplay=1'}